<%if (typeof cart !== "undefined") {%>
<h3>Shopping Cart</h3>
    <table>
        <tr>
            <th>Image</th>
            <th>Title</th>
            <th>Price</th>
            <th>Quantity</th>
            <th></th>
            <th>Subtotal</th>
            <th>Total</th>
        </tr>
        <%cart.forEach(product => {%>
        <%let subtotal = parseFloat(product.qty * product.price).toFixed(2)%>
        <%let total = parseFloat(subtotal * 1.11).toFixed(2)%>
            <tr>
                <td><img height="150" width="100" src="<%=product.image%>" alt="products images"></td>
                <td><%=product.title%></td>
                <td><%=product.price%></td>
                <td><%=product.qty%></td>
                <td>
                    <a href="/cart/update/<%=product.title%>?action=add">+</a>
                    <a href="/cart/update/<%=product.title%>?action=remove">-</a>
                    <a href="/cart/update/<%=product.title%>?action=clear">Clear</a>
                </td>
                <td><%=subtotal%></td>
                <td><%=total%></td>
            </tr>
        <%})%>
    </table>
<%}else {%>
    <h3>Your cart is empty.</h3>
<%}%>